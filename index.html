<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Flight Visualization</title>
        <link rel="stylesheet" href="style.css">

    </head>
    <body>
        <!-- Welcome / Upload Screen -->
        <section id="welcome" class="welcome">
        <div class="welcome-card">
                <div class="app-mark">✈️</div>
                <h1>Welcome to SkyTrail</h1>
                <p class="subtitle">See and interact with your flight data.</p>

                <div id="drop-zone" class="drop-zone" aria-label="CSV drop area">
                    <input id="csv-input" type="file" accept=".csv" aria-label="Choose CSV" />
                    <div class="dz-inner">
                        <strong>Drop your .csv here</strong>
                        <span>or click to choose a file</span>
                    </div>
                </div>

                <p class="hint">Expected headers: <code>Timestamp, Position, Altitude, Speed, Heading, Callsign</code></p>
            </div>
        </section>

        <!-- Dashboard (hidden until a CSV is loaded) -->
        <section id="dashboard" class="dashboard hidden">
            <div id="canvas-container"></div>

            <aside id="left-info-card" class="info-card">
                <div class="info-card-section">
                    <div class="title">Flight Info</div>
                    <div class="info-row"><span class="k">Callsign</span><span id="info-callsign" class="v">—</span></div>
                    <div class="info-row"><span class="k">Takeoff Time</span><span id="info-actual-takeoff-time" class="v">—</span></div>
                    <div class="info-row"><span class="k">Landing Time</span><span id="info-actual-landing-time" class="v">—</span></div>
                    <div class="info-row"><span class="k">Total Flight Time</span><span id="info-total-flight-time" class="v">—</span></div>
                </div>

                <div class="info-card-section">
                    <div class="title">Point Details</div>
                    <div class="info-row"><span class="k">Date/Time</span><span id="info-date" class="v">—</span></div>
                    <div class="info-row"><span class="k">Since Takeoff</span><span id="info-since" class="v">—</span></div>
                    <div class="info-row"><span class="k">Until Landing</span><span id="info-until" class="v">—</span></div>
                    <div class="info-row"><span class="k">Ground Speed</span><span id="info-speed" class="v">—</span></div>
                    <div class="info-row"><span class="k">Heading</span><span id="info-heading" class="v">—</span></div>
                    <div class="info-row"><span class="k">Location</span><span id="info-location" class="v">—</span></div>
                    <div class="info-row"><span class="k">Altitude</span><span id="info-altitude" class="v">—</span></div>
                    <div class="info-row"><span class="k">Flight Path Angle</span><span id="info-tilt" class="v">—</span></div>
                </div>

                <div class="info-card-section speed-legend">
                    <div class="title">Speed Reference Key</div>
                    <div class="speed-key-row">
                        <div class="color-key" id="color-band-0"></div><span class="k">0-39 kt</span>
                    </div>
                    <div class="speed-key-row">
                        <div class="color-key" id="color-band-1"></div><span class="k">40-159 kt</span>
                    </div>
                    <div class="speed-key-row">
                        <div class="color-key" id="color-band-2"></div><span class="k">160-299 kt</span>
                    </div>
                    <div class="speed-key-row">
                        <div class="color-key" id="color-band-3"></div><span class="k">300-419 kt</span>
                    </div>
                    <div class="speed-key-row">
                        <div class="color-key" id="color-band-4"></div><span class="k">420-519 kt</span>
                    </div>
                    <div class="speed-key-row">
                        <div class="color-key" id="color-band-5"></div><span class="k">520+ kt</span>
                    </div>
                </div>
            </aside>

            <aside id="right-info-card" class="info-card">
                <div class="info-card-section">
                    <div class="title">Flight Path</div>
                    <div id="flight-path-canvas">
                        <svg width="24" height="24" viewBox="0 0 100 120" fill="none" xmlns="http://www.w3.org/2000/svg" preserveAspectRatio="xMidYMid meet">
                            <path d="M5.85938 119.727C8.1543 119.727 10.5469 118.408 12.4512 116.602L32.0312 98.0469C32.5684 97.5098 32.959 97.2656 33.3496 97.2656C33.7402 97.2656 34.1309 97.5098 34.668 98.0469L54.248 116.602C56.1523 118.408 58.4961 119.727 60.8398 119.727C64.1602 119.727 66.6992 116.65 66.6992 113.379C66.6992 111.426 65.918 109.277 64.8926 106.543L40.0879 42.5293C38.4277 38.2812 36.1328 36.4746 33.3496 36.4746C30.5664 36.4746 28.2715 38.2812 26.6113 42.5293L1.80664 106.543C0.78125 109.277 0 111.426 0 113.379C0 116.65 2.49023 119.727 5.85938 119.727ZM8.98438 109.082C8.83789 108.887 8.78906 108.691 8.88672 108.35L32.6172 47.5098C32.7637 47.1191 33.0078 46.7773 33.3496 46.7773C33.7402 46.7773 33.8867 47.168 34.082 47.5098L57.8125 108.35C57.9102 108.691 57.9102 108.936 57.7148 109.082C57.6172 109.131 57.4219 109.277 57.1289 108.984L37.1582 90.8691C35.7422 89.5508 34.5703 88.8184 33.3496 88.8184C32.1289 88.8184 30.957 89.5508 29.541 90.8691L9.57031 108.984C9.42383 109.131 9.13086 109.277 8.98438 109.082ZM33.3496 29.7852C35.6934 29.7852 37.2559 28.125 37.2559 25.5371L37.2559 4.19922C37.2559 1.61133 35.6934 0 33.3496 0C31.0059 0 29.3945 1.61133 29.3945 4.19922L29.3945 25.5371C29.3945 28.125 31.0059 29.7852 33.3496 29.7852Z" fill="white"/>
                        </svg>
                    </div>
                </div>

                <div class="info-card-section">
                    <div class="title">Speed</div>
                    <div id="flight-speed-canvas"></div>
                    <div class="info-row"><span class="k">Max Speed</span><span id="max-speed" class="v">—</span></div>
                    <div class="info-row"><span class="k">Average Speed in Flight</span><span id="avg-speed" class="v">—</span></div>
                </div>

                <div class="strobes-control">
                    <div class="title">Cursor Strobes</div>
                    <div class="strobes-control-options">
                        <label><input type="radio" name="strobes" id="strobes-off"><span class="opt-label-text">Off</span></label>
                        <label><input type="radio" name="strobes" id="strobes-airbus"><span class="opt-label-text">Airbus</span></label>
                        <label><input type="radio" name="strobes" id="strobes-boeing" checked><span class="opt-label-text">Boeing</span></label>
                    </div>
                        
                </div>

                <div>
                    <button id="reset-button" class="button">
                        <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" fill="#000000" viewBox="0 0 256 256">
                            <path d="M213.66,82.34l-56-56A8,8,0,0,0,152,24H56A16,16,0,0,0,40,40V216a16,16,0,0,0,16,16H200a16,16,0,0,0,16-16V88A8,8,0,0,0,213.66,82.34ZM160,51.31,188.69,80H160ZM200,216H56V40h88V88a8,8,0,0,0,8,8h48V216Zm-42.34-77.66a8,8,0,0,1-11.32,11.32L136,139.31V184a8,8,0,0,1-16,0V139.31l-10.34,10.35a8,8,0,0,1-11.32-11.32l24-24a8,8,0,0,1,11.32,0Z"></path>
                        </svg>
                        <p>
                            Load Different Flight
                        </p>
                    </button>
                </div>
            </aside>

            <div id="heading-plane" aria-hidden="true">
                <svg width="28" height="28" viewBox="0 0 111 100" fill="none" xmlns="http://www.w3.org/2000/svg" preserveAspectRatio="xMidYMid meet">
                    <path d="M110.777 49.707C110.729 43.9941 102.965 39.8438 93.6389 39.8438H73.9608C71.2265 39.8438 70.2012 39.4043 68.5898 37.5488L35.7773 1.75781C34.752 0.585938 33.4824 0 32.0176 0H26.3535C25.084 0 24.3516 1.12305 24.9863 2.49023L41.8809 39.8438L17.0762 42.6758L8.23825 26.4648C7.60345 25.2441 6.52925 24.707 4.91795 24.707H2.81835C1.54875 24.707 0.71875 25.5371 0.71875 26.8066V72.6074C0.71875 73.877 1.54875 74.6582 2.81835 74.6582H4.91795C6.52925 74.6582 7.60345 74.1211 8.23825 72.9492L17.0762 56.7383L41.8809 59.5703L24.9863 96.9238C24.3516 98.2422 25.084 99.4141 26.3535 99.4141H32.0176C33.4824 99.4141 34.752 98.7793 35.7773 97.6562L68.5898 61.8164C70.2012 60.0098 71.2265 59.5703 73.9608 59.5703H93.6389C102.965 59.5703 110.729 55.3711 110.777 49.707Z" fill="white" fill-opacity="0.85"/>
                </svg>
            </div>

            <div id="cursor-plane" aria-hidden="true">
            <!-- Plane SVG pointing right -->
                <svg width="28" height="28" viewBox="0 0 111 100" fill="none" xmlns="http://www.w3.org/2000/svg" preserveAspectRatio="xMidYMid meet">
                    <path d="M110.777 49.707C110.729 43.9941 102.965 39.8438 93.6389 39.8438H73.9608C71.2265 39.8438 70.2012 39.4043 68.5898 37.5488L35.7773 1.75781C34.752 0.585938 33.4824 0 32.0176 0H26.3535C25.084 0 24.3516 1.12305 24.9863 2.49023L41.8809 39.8438L17.0762 42.6758L8.23825 26.4648C7.60345 25.2441 6.52925 24.707 4.91795 24.707H2.81835C1.54875 24.707 0.71875 25.5371 0.71875 26.8066V72.6074C0.71875 73.877 1.54875 74.6582 2.81835 74.6582H4.91795C6.52925 74.6582 7.60345 74.1211 8.23825 72.9492L17.0762 56.7383L41.8809 59.5703L24.9863 96.9238C24.3516 98.2422 25.084 99.4141 26.3535 99.4141H32.0176C33.4824 99.4141 34.752 98.7793 35.7773 97.6562L68.5898 61.8164C70.2012 60.0098 71.2265 59.5703 73.9608 59.5703H93.6389C102.965 59.5703 110.729 55.3711 110.777 49.707Z" fill="white" fill-opacity="0.85"/>
                </svg>
                <div class="strobe" id="strobe-left"></div>
                <div class="strobe" id="strobe-right"></div>
            </div>

            <div class="cursor-status-indicator" id="cursor-status-indicator">
                <svg width="50" height="50" viewBox="0 0 50 50" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <g opacity="0.75">
                        <path opacity="0.8" d="M37.7854 19.2949C38.2275 19.4429 38.6145 19.721 38.8958 20.0928C39.177 20.4646 39.3395 20.9132 39.3616 21.3789C39.3835 21.8443 39.2644 22.3056 39.0198 22.7021C38.7748 23.0989 38.4148 23.4126 37.9885 23.6016L37.9417 23.6201L30.6917 26.4053L38.8674 34.5801C39.1926 34.9053 39.3752 35.3467 39.3752 35.8066C39.3752 36.2666 39.1927 36.7079 38.8674 37.0332L37.0334 38.8672C36.8723 39.0288 36.6808 39.1576 36.47 39.2451C36.2593 39.3326 36.0331 39.377 35.8049 39.377C35.5767 39.3769 35.3506 39.3326 35.1399 39.2451C34.9291 39.1576 34.7375 39.0289 34.5764 38.8672L26.4006 30.6914L23.6213 37.9404L23.6028 37.9883C23.4256 38.4009 23.1305 38.7526 22.7551 38.999C22.3797 39.2455 21.9396 39.3756 21.4905 39.374H21.3782C20.9099 39.3544 20.4587 39.1916 20.0862 38.9072C19.7138 38.6229 19.4375 38.2306 19.2952 37.7842L17.8752 33.4375L33.4377 17.875L37.7854 19.2949ZM31.3059 17.1787L17.179 31.3047L15.7864 27.041L27.0413 15.7861L31.3059 17.1787ZM13.3958 11.6885C13.8101 11.5895 14.2438 11.6077 14.6487 11.7402L24.9094 15.0898L15.0901 24.9092L11.7405 14.6484C11.608 14.2436 11.5907 13.8098 11.6897 13.3955C11.7887 12.9813 11.9999 12.602 12.301 12.3008C12.6022 11.9996 12.9814 11.7875 13.3958 11.6885Z" fill="white"/>
                    </g>
                    <rect x="35.4148" y="7.41504" width="3.99801" height="40" rx="1.99901" transform="rotate(45 35.4148 7.41504)" fill="white"/>
                </svg>
                <div class="cursor-status-msg">
                    Cursor Paused
                    <span class="cursor-status-msg-subtitle">Press <kbd>Space</kbd> to activate</span>
                </div>
                
            </div>
        </section>

        <!-- Load p5.js from CDN -->
        <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.9.0/p5.min.js"></script>
        <!-- Sketch -->
        <script src="sketch2.js"></script>
    </body>
</html>